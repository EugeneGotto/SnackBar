CREATE TABLE [dbo].[Buyers] (
    [Id] [bigint] NOT NULL IDENTITY,
    [Email] [nvarchar](50) NOT NULL,
    [Pin] [nvarchar](4) NOT NULL,
    [Balance] [decimal](18, 2) NOT NULL,
    [Password] [nvarchar](10),
    [IsDeleted] [bit] NOT NULL,
    CONSTRAINT [PK_dbo.Buyers] PRIMARY KEY ([Id])
)
CREATE TABLE [dbo].[CartItems] (
    [Id] [bigint] NOT NULL IDENTITY,
    [ProductId] [bigint] NOT NULL,
    [BuyerId] [bigint] NOT NULL,
    [Count] [int] NOT NULL,
    [IsDeleted] [bit] NOT NULL,
    CONSTRAINT [PK_dbo.CartItems] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_ProductId] ON [dbo].[CartItems]([ProductId])
CREATE INDEX [IX_BuyerId] ON [dbo].[CartItems]([BuyerId])
CREATE TABLE [dbo].[Products] (
    [Id] [bigint] NOT NULL IDENTITY,
    [Name] [nvarchar](50) NOT NULL,
    [Count] [tinyint] NOT NULL,
    [Price] [decimal](18, 2) NOT NULL,
    [Barcode] [nvarchar](20) NOT NULL,
    [IsDeleted] [bit] NOT NULL,
    CONSTRAINT [PK_dbo.Products] PRIMARY KEY ([Id])
)
CREATE TABLE [dbo].[Tags] (
    [Id] [bigint] NOT NULL IDENTITY,
    [TagName] [nvarchar](max) NOT NULL,
    [TagNameRu] [nvarchar](max),
    [IsDeleted] [bit] NOT NULL,
    CONSTRAINT [PK_dbo.Tags] PRIMARY KEY ([Id])
)
CREATE TABLE [dbo].[Orders] (
    [Id] [bigint] NOT NULL IDENTITY,
    [ProductId] [bigint] NOT NULL,
    [UserId] [bigint] NOT NULL,
    [Pin] [nvarchar](max) NOT NULL,
    [Price] [decimal](18, 2) NOT NULL,
    [Date] [datetime] NOT NULL,
    [Count] [int],
    [IsDeleted] [bit] NOT NULL,
    CONSTRAINT [PK_dbo.Orders] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_ProductId] ON [dbo].[Orders]([ProductId])
CREATE INDEX [IX_UserId] ON [dbo].[Orders]([UserId])
CREATE TABLE [dbo].[Payments] (
    [Id] [bigint] NOT NULL IDENTITY,
    [UserId] [bigint] NOT NULL,
    [Date] [datetime] NOT NULL,
    [Money] [decimal](18, 2) NOT NULL,
    [IsDeleted] [bit] NOT NULL,
    CONSTRAINT [PK_dbo.Payments] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_UserId] ON [dbo].[Payments]([UserId])
CREATE TABLE [dbo].[AspNetRoles] (
    [Id] [nvarchar](128) NOT NULL,
    [Name] [nvarchar](256) NOT NULL,
    CONSTRAINT [PK_dbo.AspNetRoles] PRIMARY KEY ([Id])
)
CREATE UNIQUE INDEX [RoleNameIndex] ON [dbo].[AspNetRoles]([Name])
CREATE TABLE [dbo].[AspNetUserRoles] (
    [UserId] [nvarchar](128) NOT NULL,
    [RoleId] [nvarchar](128) NOT NULL,
    CONSTRAINT [PK_dbo.AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId])
)
CREATE INDEX [IX_UserId] ON [dbo].[AspNetUserRoles]([UserId])
CREATE INDEX [IX_RoleId] ON [dbo].[AspNetUserRoles]([RoleId])
CREATE TABLE [dbo].[AspNetUsers] (
    [Id] [nvarchar](128) NOT NULL,
    [Email] [nvarchar](256),
    [EmailConfirmed] [bit] NOT NULL,
    [PasswordHash] [nvarchar](max),
    [SecurityStamp] [nvarchar](max),
    [PhoneNumber] [nvarchar](max),
    [PhoneNumberConfirmed] [bit] NOT NULL,
    [TwoFactorEnabled] [bit] NOT NULL,
    [LockoutEndDateUtc] [datetime],
    [LockoutEnabled] [bit] NOT NULL,
    [AccessFailedCount] [int] NOT NULL,
    [UserName] [nvarchar](256) NOT NULL,
    CONSTRAINT [PK_dbo.AspNetUsers] PRIMARY KEY ([Id])
)
CREATE UNIQUE INDEX [UserNameIndex] ON [dbo].[AspNetUsers]([UserName])
CREATE TABLE [dbo].[AspNetUserClaims] (
    [Id] [int] NOT NULL IDENTITY,
    [UserId] [nvarchar](128) NOT NULL,
    [ClaimType] [nvarchar](max),
    [ClaimValue] [nvarchar](max),
    CONSTRAINT [PK_dbo.AspNetUserClaims] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_UserId] ON [dbo].[AspNetUserClaims]([UserId])
CREATE TABLE [dbo].[AspNetUserLogins] (
    [LoginProvider] [nvarchar](128) NOT NULL,
    [ProviderKey] [nvarchar](128) NOT NULL,
    [UserId] [nvarchar](128) NOT NULL,
    CONSTRAINT [PK_dbo.AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey], [UserId])
)
CREATE INDEX [IX_UserId] ON [dbo].[AspNetUserLogins]([UserId])
CREATE TABLE [dbo].[TagProduct] (
    [ProductId] [bigint] NOT NULL,
    [TagId] [bigint] NOT NULL,
    CONSTRAINT [PK_dbo.TagProduct] PRIMARY KEY ([ProductId], [TagId])
)
CREATE INDEX [IX_ProductId] ON [dbo].[TagProduct]([ProductId])
CREATE INDEX [IX_TagId] ON [dbo].[TagProduct]([TagId])
ALTER TABLE [dbo].[CartItems] ADD CONSTRAINT [FK_dbo.CartItems_dbo.Buyers_BuyerId] FOREIGN KEY ([BuyerId]) REFERENCES [dbo].[Buyers] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[CartItems] ADD CONSTRAINT [FK_dbo.CartItems_dbo.Products_ProductId] FOREIGN KEY ([ProductId]) REFERENCES [dbo].[Products] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[Orders] ADD CONSTRAINT [FK_dbo.Orders_dbo.Products_ProductId] FOREIGN KEY ([ProductId]) REFERENCES [dbo].[Products] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[Orders] ADD CONSTRAINT [FK_dbo.Orders_dbo.Buyers_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[Buyers] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[Payments] ADD CONSTRAINT [FK_dbo.Payments_dbo.Buyers_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[Buyers] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[AspNetUserRoles] ADD CONSTRAINT [FK_dbo.AspNetUserRoles_dbo.AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [dbo].[AspNetRoles] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[AspNetUserRoles] ADD CONSTRAINT [FK_dbo.AspNetUserRoles_dbo.AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[AspNetUsers] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[AspNetUserClaims] ADD CONSTRAINT [FK_dbo.AspNetUserClaims_dbo.AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[AspNetUsers] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[AspNetUserLogins] ADD CONSTRAINT [FK_dbo.AspNetUserLogins_dbo.AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[AspNetUsers] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[TagProduct] ADD CONSTRAINT [FK_dbo.TagProduct_dbo.Products_ProductId] FOREIGN KEY ([ProductId]) REFERENCES [dbo].[Products] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[TagProduct] ADD CONSTRAINT [FK_dbo.TagProduct_dbo.Tags_TagId] FOREIGN KEY ([TagId]) REFERENCES [dbo].[Tags] ([Id]) ON DELETE CASCADE
CREATE TABLE [dbo].[__MigrationHistory] (
    [MigrationId] [nvarchar](150) NOT NULL,
    [ContextKey] [nvarchar](300) NOT NULL,
    [Model] [varbinary](max) NOT NULL,
    [ProductVersion] [nvarchar](32) NOT NULL,
    CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
)
INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
VALUES (N'201804090907029_Initial', N'SnackBar.DAL.Migrations.Configuration',  0x1F8B0800000000000400ED5D5B6FDCBA117E2FD0FF20EC535BF878633B09D2C03E078E1D9F1A27718CAC73D0B78096E8B5105DF648DAC446D15FD687FEA4FE85921225F13694A8DBCA411020F08AE470487EC3CB0C39F3BFFFFCF7F897873070BEE224F5E3E86471B0FF6CE1E0C88D3D3F5A9F2CB6D9DD4FAF16BFFCFCE73F1DBFF5C207E7F732DF11CD474A46E9C9E23ECB36AF97CBD4BDC7214AF743DF4DE234BECBF6DD385C222F5E1E3E7BF6F7E5C1C11213120B42CB718E3F6EA3CC0F71FE83FC3C8B23176FB22D0ADEC71E0E52F69DA4AC72AACE150A71BA412E3E59AC22E47E798392FDF3D377FBA460861FB285731AF888F0B2C2C1DDC24151146728239CBEFE94E25596C4D17AB5211F5070F3B8C124DF1D0A52CC5AF0BACEDEB631CF0E69639675C19294BB4DB338B4247870C47A672917EFD4C78BAAF748FFBD25FD9C3DD256E77D78B278B37DC4C9C2916B7A7D16243497D4BFC570ECE785F61C3E69AF0203C10CFDB7E79C6D836C9BE093086FB304057BCEF5F636F0DDDFF0E34DFC054727D1360878E6087B244DF8403E5D27F10627D9E3477CC758BEF416CE522CB7940B56C5B832457B2EA3ECE5F38573452A47B701AEC69E6BFB2A8B13FC2B8E708232EC5DA32CC3494469E0BCF794DAA5BADE86C80FCAEA08DA88E82C9CF7E8E11D8ED6D9FDC9E20591950BFF017BE507C6C1A7C8278246CA64C9166B3834D77AED47863A9F8F51E51B142022A865B5E7D8F543445A7E9D90BFD804F26AE1AC5C44491EDA3709A5E9B738F10CED3A68D797E67A2ED3731C6032D465456FE238C0286A60F878594B9351C6CE50925D6638B415B3B2DC0F49830092C4DED6CD9AAB6CC0319DCEFA12398BC91AC69138B2C77B471C124257E8ABBFCEBB54D7B485F31107796A7AEF6F8A55B102D76796E52289C38F71C0C1B548F9BC8AB7492EE4B136F906256B9CB5E7888D9999A72A93862B9606F35566D071D65A662B0EEC449615FB21B1405DF4FFC997464134DF3C661D16D7C41F719D2330A1AD33F4CBE128FD32C27C7383D6A956B46BA1A4196AB1E6BF2B222D24F6126742C1569449911F620CD445FAA64192C99F63409655FC713B40D5930B0783730F012965402B20A5F47412900F89677F0ECC0BFD1012A0AE8176A79FD2FE9B53F3E17024591D77D13C47594D9CFC7DE3873D77066CD3BEAB69413B2BE412A6DB0E0B09CAC229A6DA6ED129E20CDC14C9322BF42BC0479ED46F378E1E431CD9EFC68B623F66A811A79641E4F07D1CE1C7D1A68A116416141106394548F8EFEA3E974FEC2528E5C853BA2669795F698C4FD3CD15CEF6CB82FB05C98B8490FB16275FF6798A7B4EEB72B5941DB695B2A383DBBBA3572F5E22EFE8E5737CF4627A89D329180F5F8DB13636EC9E0F5FBC1CA456237EF5FB507EBC3FB36C358CD55405CC9A2C83409A921A1ED625D5F943BB9CAC97CD596983BA4882B81E4C270D25BFE3D6DB1A71A79B0D19BC1C5AC5346EB7EBA87023D179A2DB90E960D064386B3B2BB6A8E52C8EEEFC24ECB025006C54FF40E9FDE83A891576B70941D62A43E166F4DAAEEFC9AEEC6A1BDE521198AEAEC186E6E65B7C815CB2437E1BD152BDE9BD8BDD2FF1367B1B79749FFB2973D56D6F4B0283B073EABA384D2F0898B13780F189CE50BBDE959C05C80FF5DB12692EFD5C66ADB726FA1CCAF604C8667B467E17AFFDA81DAB655698D5224723AB2C9B2DAB94583B4E594E98D13C43239F45AEC1367DF9080DBFEBCBC9CE7FDBD75B87A09D0BC6D2214CB759C8878F563AFADA94D7F43B0AB64357D5491AF249607869C8C9CE5F1A7236C9E7AF7E6EAE6871162A33FF8615285B1CB39A654EE26C6A71109A3975E5D3CC0190B89CA669ECFAB9144817AED8DD169177B27F73CC175D8A56F01752486308B87DBACC11064E167F537A04A45A99EC6AAAECC68D48F2602163F34354A82D9D53B7B83B7A86521779EA68907EF1C42F04CE38A1828BE8492725E2E847998A7D3F72FD0D0A8C8C4BA55AAE5194AB8ABE9C728E3738A2F38A711CDA545CDDDC526BAF2A91FAAAA96B8E971C9ECC30134CB6101CF4171C6A3054B69DF608D39B846B92F9650723398B462A77B21A71AF18A5069227D99CD5DC8933922989F929A54A1A8F365573A6EB9D489668F6849001D8406B58B04B0DEDB1A6B79B3E05A069399F0065DA31783A10CBF5BB66348816BBDEE0126C7CF3DF14A84C4F062ABEE3DB540A1A4826D90BF0765F70E1D61A81B9D9A5BCE660B117D0998EE70F2B1DDB13004B3700B38796C6220BA1C1649EAD31215E1218111A46C63460554DBD4D82D0097C702F4D0041B827DA54AEB7EC4E044440070F8D799342BE1E77C5E03A09261B2C01002E99367A14609A7B6C02709ABB64F633256079690B00D90C3337804AF61F00A04C413C0940C51EDB0140C52E7972002D0C6E6DC75FB2BECD0D9EA2D96FFA65DDD85D3BC0A6D01F338366A149A7EE1248099CD40FD12A0F0A8A818970C76C4C2953D7CBC0A0245738E375B3E9C2A995F6E2914439D288C54BF5958E42AD466C2052BFB85168549A9C0612C57B1CA578AE636D289A1F63758599EAA089F9E2B0A265BE3C28369060067DA5BC78026820228BAF89602DE20D44D9CD5285903295593057DE093172C7F66F1664CBFB1B46B26CD595C872D2A722BB7C79CD65D2BFCD96A783460B56D51A418C9469A5D166C5D129A5595E1FC416B668BDF8CE4D6D3B6C54711ACD2A1CBFB5E41B9AAD35A470440A1E7B37597DD66E1872ADD25B3F58B2E6BBFBB0CB1AEF161DD9A11FA4C74C6A2718D4FE2D14FF1CD3E5CC6B68BB5ED53F66C38BF90C6AB5AA386CD2457769AFA0261C45BC85F72F1AF106F5A4CD9A527E70AAB5D124DE3ADDE8188DD6BD99509BDEA4C76BABC9E35AC09663431F18146F1C1DCD12DFBB53A01B9B6AC7B4D12BD96896B886B1C1307450831608E8A4B23183F752B9D968EE259D72C346BDD1AB97245504D04B656306EF2586D1E64ED21CB02D8ED8BDBA483C0E0F246CE51DA8EAE456A51D2F0BDF78ECC3F11270A277FC1E6D367EB4E69CEAB12FCEAAF0A877F6D3CADED15C58D058BA426FCBE7CCAAA62C4ED01A4BA9F43DB6872FFC24CDCE51866E11BD0176E6854A36EE9C0A6CE3CB8A84A3A83A76E586BECC4EFF664F2D346E05F7B5DBF1BA032F489BE88293370FCB0B8D5ACEA1FE0C518012CDF5DDB338D88611AC97804BB357343C01F6A93D8DDC5F004FE15A3DDC98CA579EE1781AD5470B3E2A0F700233D5D7F694B837C042D7D69F555AC74B696015BD8C8220457B26E2B1155AEBBD7B6FC0568A127BCCC245C7812D771F44186BF89A084CABBA1628C00FBA2B08D361CF6A782AECD37709BCEAC4D31B77C011AE05ECC092E3A0AE78F1C4972FBE4C8B11E62945C4BD6F3755564EC4C429977DFC2EF10AA8882CB14A35B9F638D5961A07A395B32D9E44F5D19A0EF59DA5A1443F7F972861BA91DE382994F6F64801CACD7F152DCD513C21C84465E0A8E7567288B9B1F051C39328BEFCD809403B8152BDD67F27C02C551D760250C971246718B4F7471A7385C493609FBE4BA4410A1A4B9809064D7BAC998BEF7AEBB9A3A151F554830D536526EE3E5430897125BCBC81C953816E65EE6CE820EB82E570C9C678FBD16AA4305F1D98EC274621C6A5D96BB40A7F313AAD5691D29EA2E414862729255970C9BB7E1198E4133AD1037A549FC3E270A3387B11CE384A6A7BCA1AB72F3C694D7207DA1A9EE5B4F654359E6178C29A64BB6D92BA72D55F6733056AAC75832E5FC53DA27EEB174063CE1B5CCEED867018AA3F5BD2628E351462ECFB2CF1049A5E7BE0A9B840D60F4F000D78F6115C5688938FD1CF064C53F04321A920603F1C303D3BD48E8D0DD12EABD59EB38B6DED14E42C33A004D7E818A9BD59AFF2116EC2A91DD36A4231BEC9E56AB6640ABC02DD8A2942C28E21D97CAE8EA4624597B35438625FAADF95159D59B09BE3D32926ED220BF56E5C080441C8639AE1709F66D85FFD119C053ED57B5419DEA3C8BFC3695678D1591C3E3B389402DCCD27D8DC324D3DC1472514714E1CB1093C61DDFA6446CB98AC99DC5DF5715A197D45897B8F1225A84D777FFD5A921D625C89B1DABCB163B569D93E107AA253148E5B3F1B3C2CDB7783456EFE162B521E735C461E7E3859FC2B2FF8DAB9FCE7E7AAEC9E935B2C5E3BCF9C7FF70DA566513F2BD9AB76C10D665E715F4FF103C24D6BD97ECA682B0E7CC34E7CC208667EF4D8651485C02383CF7452B42E6DCB0FED5B3E26F4948DE453869D147BAAECFFBF84E8E1AFFDE34981E476BD5A69CCC84F791477BF54894E0B2DAA2F0AF6AA5BB3BFEB86DF71A73A3EB68B47FECE7AC75892A6F35D0B95D6C6FC94C56A97A01E042D4224A0C1013D2696601BF21480D29FB7A8DBD54176754D08A28DA67FE59FF79CCBF453E4FFB125093744C229966437F2C3F6B9DE183CD3B82AED7B1590CB9E232C465BB1E2A628DA839BCE31589EAE40352B882481E81EC4A479368315377C00935E9B606D90925E1435814886A2374817428146BAD002838CE856D4368DD5071DE9C21A1870A4CB19BDB618DB4E4365C91D2E351ABBED1453D2043BC65DAF4D4A54875E82AE466EB020D7233A4307643CB1C00683AD8ED76ADC82C168EF12DAB66AE18E2A3A93C556CDAD35A5362360F7BA1AC6B875ED79398B9A070F31C15CFC704E83C677C8ABFA77E9E883BF931736E88D749BC5D0E9E2DFFE89058AD05ED1507D124DEE755EE120F770A632D11C5CA22B72B406B271B0035FB0B19E6527C78FEE360D377AF2B069C6EB3BC34DDB519C1633E0B5A509F0D23A66CBEE279B5D2C51134E34568BD4AEA799765157768F19E63E93ABBF652C8EB9A3057A623C57A818835DEC76EB3B2D4626DBF4B647C8FCA3A1EC1620950B5D7E1A6B1B7F65DE2081DF5CCF0C261D239BCC259849EDEC58C3CF84314CA60C5B6278B9DBD65E3A11B8FA452B99817F7D8DD76A006713C624991A6BD033BB99CD64FD228FCC0C6CCC973900B609E38B4C0D36E80DDECCC1661545646658DBD5FAB963A4B55E42771E134475C92A0F2B7BB6C86BDAE1A81FC5EBB79385771B93612F0C31801F6E9972AD155288D7493AFAA0337C285E88295C88AE826BC855BC4C3F57822AB4F3AF3ABADAF803324D76AE55A8B2EF3ABA7A77F150001253FC116D6F00BED9C1201B85982B9588C9BA9A4ED3CD15CEF43E94A1CAEA7905ACB0CE02570A3B6F962B56E658A55E2587B95ABBB6B2BDA1B1B12C8FB95AC0E5B9A96EB65530D6CDF298EB061C8903E2AB97323E1110B64AC8A57AC60EE322CC999CC76875D6D729CEB9626060A47E715A2A87E8E6702DC0EB739DEE98E319E8745D396E60E577F20337B874DBDED060FDCB76D91AC771AC6175F2860E1C8EA6EB988E0DE0C1A2CD746DA0B03073AE40876A5AAF78325DA69CF11A3450D4982E8D92363982EBC9FE0D1B39328C36AE842EFE5AC3F94B43A54EECDD09D34582115AD2104AAE49D706F4893E7EDC9C03BF0CD229C2560E703C347CA78C15E765902E1952742CE2BAA89E67C8997F1BD1B701C5AF739CFAEB9AC431A119615738ED57792EA3BBB8543A481C9559E4077A38431ECAD06992F977C8CD48327D16E047646B925FB5A68F536EB177197DD8669B6D469A8CC3DB40B8A34C9517A6FAF3E03522CFC71F36F4573A4413089B3E7D4EF1217AB3F503AFE2FB427321142041B522EC123E1DCB8C5EC65F3F5694AEE2A82521D67D9532E706879B80104B3F442BF41577E18DC0EF1D5E23F7B1BEB40D11691E08B1DB8FCF7DB44E5098321A7579F29360D80B1F7EFE3FCABC01FC46B80000 , N'6.1.3-40302')


